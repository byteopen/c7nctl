name: Build and List Artifacts
on:
  push:
    branches: [ main ]  # ä¸»åˆ†æ”¯æ¨é€æ—¶è§¦å‘
  workflow_dispatch:   # æ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  build-and-list:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4  # æ£€å‡ºå½“å‰ä»“åº“ä»£ç [1,6](@ref)

      - name: Set up Go
        uses: actions/setup-go@v4  # é…ç½®Goç¯å¢ƒ[6,7](@ref)
        with:
          go-version: '1.22'       # æŒ‡å®šGoç‰ˆæœ¬

      - name: Install Dependencies
        run: |
          go get -v ./...          # å®‰è£…é¡¹ç›®ä¾èµ–[6](@ref)
          echo "âœ… Dependencies installed"

      - name: Build Project
        run: |
          go build # ç¼–è¯‘å¹¶æŒ‡å®šè¾“å‡ºç›®å½•[7](@ref)
          echo "ğŸ› ï¸ Build completed"

      - name: List Compiled Files
        run: |
          echo "ğŸ“¦ Compiled Artifacts:"
          find bin/ -type f -exec ls -lh {} \;  # é€’å½’åˆ—å‡ºç¼–è¯‘äº§ç‰©[1,3](@ref)
          echo "---------------------------------"
          echo "ğŸ—‚ï¸ Full directory structure:"
          tree bin/ || ls -R bin/               # å±•ç¤ºç›®å½•æ ‘ç»“æ„
